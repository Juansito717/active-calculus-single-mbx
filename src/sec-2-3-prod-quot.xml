<?xml version="1.0" encoding="UTF-8" ?>
<!-- **********************************************************************-->
<!-- Copyright 2012-2017                                                   -->
<!-- Matthew Boelkins                                                      -->
<!--                                                                       -->
<!-- This file is part of Active Calculus.                                 -->
<!--                                                                       -->
<!-- Permission is granted to copy, distribute and/or modify this document -->
<!-- under the terms of the Creative Commons BY-NC-SA license.  The work   -->
<!-- may be used for free by any party so long as attribution is given to  -->
<!-- the author(s), the work and its derivatives are used in the spirit of -->
<!-- "share and share alike"; no party may sell this work or any of its    -->
<!-- derivatives for profit.  All trademarks are the registered marks of   -->
<!-- their respective owners.                                              -->
<!-- **********************************************************************-->
<section xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="sec-2-3-prod-quot">

<title>The product and quotient rules</title>

    <objectives>
        <ul>
            <li><p>How does the algebraic structure of a function direct us in computing its derivative using shortcut rules?</p></li>
            <li><p>How do we compute the derivative of a product of two basic functions in terms of the derivatives of the basic functions?</p></li>
            <li><p>How do we compute the derivative of a quotient of two basic functions in terms of the derivatives of the basic functions?</p></li>
            <li><p>How do the product and quotient rules combine with the sum and constant multiple rules to expand the library of functions we can quickly differentiate?</p></li>
        </ul>
    </objectives>
<introduction>
<p>
So far, the basic functions we know how to differentiate include power functions (<m>x^n</m>), exponential functions (<m>a^x</m>), and the two fundamental trigonometric functions (<m>\sin(x)</m> and <m>\cos(x)</m>). With the sum rule and constant multiple rules, we can also compute the derivative of combined functions such as
<me>
  f(x) = 7x^{11} - 4 \cdot 9^x + \pi \sin(x) - \sqrt{3}\cos(x),
</me>
because the function <m>f</m> is fundamentally a sum of basic functions. Indeed, we can now quickly say that <m>f'(x) = 77x^{10} - 4 \cdot 9^x \ln(9) + \pi \cos(x) + \sqrt{3} \sin(x)</m>.
</p>

<p>
But we can of course combine basic functions in ways other than multiplying them by constants and taking sums and differences. For example, we could consider the function that results from a product of two basic functions, such as
<me>
  p(z) = z^3 \cos(z),
</me>
or another that is generated by the quotient of two basic functions, one like
<me>
  q(t) = \frac{\sin(t)}{2^t}.
</me>
</p>

<p>
While the derivative of a sum is the sum of the derivatives, it turns out that the rules for computing derivatives of products and quotients are more complicated. In what follows we explore why this is the case, what the product and quotient rules actually say, and work to expand our repertoire of functions we can easily differentiate. To start, <xref ref="PA-2-3">Preview Activity</xref> asks you to investigate the derivative of a product and quotient of two polynomials.
</p>

    <xi:include href="./previews/PA-2-3.xml" />

</introduction>

<subsection>
<title>The product rule</title>
<p>
As part (b) of <xref ref="PA-2-3">Preview Activity</xref> shows, it is not true in general that the derivative of a product of two functions is the product of the derivatives of those functions. Indeed, the rule for differentiating a function of the form <m>p(x) = f(x) \cdot g(x)</m> in terms of the derivatives of <m>f</m> and <m>g</m> is more complicated than simply taking the product of the derivatives of <m>f</m> and <m>g</m>. To see further why this is the case, as well as to begin to understand how the product rule actually works, we consider an example involving meaningful functions.
</p>

<p>
Say that an investor is regularly purchasing stock in a particular company. Let <m>N(t)</m> be a function that represents the number of shares owned on day <m>t</m>, where <m>t = 0</m> represents the first day on which shares were purchased. Further, let <m>S(t)</m> be a function that gives the value of one share of the stock on day <m>t</m>; note that the units on <m>S(t)</m> are dollars per share. Moreover, to compute the total value on day <m>t</m> of the stock held by the investor, we use the function <m>V(t) = N(t) \cdot S(t)</m>. By taking the product
<me>
  V(t) = N(t) \, \text{shares}  \cdot S(t) \, \text{dollars per share} ,
</me>
we have the total value in dollars of the shares held. Observe that over time, both the number of shares and the value of a given share will vary. The derivative <m>N'(t)</m> measures the rate at which the number of shares held is changing, while <m>S'(t)</m> measures the rate at which the value per share is changing. The big question we'd like to answer is: how do these respective rates of change affect the rate of change of the total value function?
</p>

<p>
To help better understand the relationship among changes in <m>N</m>, <m>S</m>, and <m>V</m>, let's consider some specific data. Suppose that on day 100, the investor owns 520 shares of stock and the stock's current value is <dollar />27.50 per share. This tells us that <m>N(100) = 520</m> and <m>S(100) = 27.50</m>. In addition, say that on day 100, the investor purchases an additional 12 shares (so the number of shares held is rising at a rate of 12 shares per day), and that on that same day the price of the stock is rising at a rate of 0.75 dollars per share per day. Viewed in calculus notation, this tells us that <m>N'(100) = 12</m> (shares per day) and <m>S'(100) = 0.75</m> (dollars per share per day). At what rate is the value of the investor's total holdings changing on day 100?
</p>

<p>
Observe that the increase in total value comes from two sources: the growing number of shares, and the rising value of each share. If only the number of shares is rising (and the value of each share is constant), the rate at which which total value would rise is found by computing the product of the current value of the shares with the rate at which the number of shares is changing. That is, the rate at which total value would change is given by
<me>
  S(100) \cdot N'(100) = 27.50 \, \frac{\text{dollars} }{\text{share} } \cdot 12 \, \frac{\text{shares} }{\text{day} } = 330 \, \frac{\text{dollars} }{\text{day} }.
</me>
</p>

<p>
Note particularly how the units make sense and explain that we are finding the rate at which the total value <m>V</m> is changing, measured in dollars per day. If instead the number of shares is constant, but the value of each share is rising, then the rate at which the total value would rise is found similarly by taking the product of the number of shares with the rate of change of share value. In particular, the rate total value is rising is
<me>
  N(100) \cdot S'(100) = 520 \, \text{shares}  \cdot 0.75 \, \frac{\text{dollars per share} }{\text{day} } = 390 \, \frac{\text{dollars} }{\text{day} }.
</me>
</p>

<p>
Of course, when both the number of shares is changing and the value of each share is changing, we have to include both of these sources, and hence the rate at which the total value is rising is
<me>
  V'(100) = S(100) \cdot N'(100) + N(100) \cdot S'(100) = 330 + 390 = 720 \, \frac{\text{dollars} }{\text{day} }.
</me>
</p>

<p>
This tells us that we expect the total value of the investor's holdings to rise by about <dollar />720 on the 100th day.<fn>While this example highlights why the product rule is true, there are some subtle issues to recognize.  For one, if the stock's value really does rise exactly <dollar />0.75 on day 100, and the number of shares really rises by 12 on day 100, then we'd expect that <m>V(101) = N(101) \cdot S(101) = 532 \cdot 28.25 = 15029</m>.  If, as noted above, we expect the total value to rise by <dollar />720, then with <m>V(100) = N(100) \cdot S(100) = 520 \cdot 27.50 = 14300</m>, then it seems like we should find that <m>V(101) = V(100) + 720 = 15020.</m>  Why do the two results differ by 9?  One way to understand why this difference occurs is to recognize that <m>N'(100) = 12</m> represents an <em>instantaneous</em> rate of change, while our (informal) discussion has also thought of this number as the total change in the number of shares over the course of a single day.  The formal proof of the product rule reconciles this issue by taking the limit as the change in the input tends to zero.</fn>
</p>

<p>
Next, we expand our perspective from the specific example above to the more general and abstract setting of a product <m>p</m> of two differentiable functions, <m>f</m> and <m>g</m>. If we have <m>P(x) = f(x) \cdot g(x)</m>, our work above suggests that <m>P'(x) = f(x) g'(x) + g(x) f'(x).</m> Indeed, a formal proof using the limit definition of the derivative can be given to show that the following rule, called the <em>product rule</em><idx><h>product rule</h></idx>, holds in general.
</p>

<assemblage xml:id="prod-rule">
    <title>Product Rule</title>
    <p><idx><h>product rule</h></idx> If <m>f</m> and <m>g</m> are differentiable functions, then their product <m>P(x) = f(x) \cdot g(x)</m> is also a differentiable function, and
<me>
  P'(x) = f(x) g'(x) + g(x) f'(x).
</me></p>
</assemblage>


<p>
In light of the earlier example involving shares of stock, the product rule also makes sense intuitively: the rate of change of <m>P</m> should take into account both how fast <m>f</m> and <m>g</m> are changing, as well as how large <m>f</m> and <m>g</m> are at the point of interest. Furthermore, we note in words what the product rule says: if <m>P</m> is the product of two functions <m>f</m> (the first function) and <m>g</m> (the second), then <q>the derivative of <m>P</m> is the first times the derivative of the second, plus the second times the derivative of the first.</q> It is often a helpful mental exercise to say this phrasing aloud when executing the product rule.
</p>

<p>
For example, if <m>P(z) = z^3 \cdot \cos(z)</m>, we can now use the product rule to differentiate <m>P</m>. The first function is <m>z^3</m> and the second function is <m>\cos(z)</m>. By the product rule, <m>P'</m> will be given by the first, <m>z^3</m>, times the derivative of the second, <m>-\sin(z)</m>, plus the second, <m>\cos(z)</m>, times the derivative of the first, <m>3z^2</m>. That is,
<me>
  P'(z) = z^3(-\sin(z)) + \cos(z) 3z^2 = -z^3 \sin(z) + 3z^2 \cos(z).
</me>
</p>

<p>
The following activity further explores the use of the product rule.
</p>

    <xi:include href="./activities/act-2-3-1.xml" />

</subsection>

<subsection>
<title>The quotient rule</title>
<p>
Because quotients and products are closely linked, we can use the product rule to understand how to take the derivative of a quotient. In particular, let <m>Q(x)</m> be defined by <m>Q(x) = f(x)/g(x)</m>, where <m>f</m> and <m>g</m> are both differentiable functions. We desire a formula for <m>Q'</m> in terms of <m>f</m>, <m>g</m>, <m>f'</m>, and <m>g'</m>. It turns out that <m>Q</m> is differentiable everywhere that <m>g(x) \ne 0</m>. Moreover, taking the formula <m>Q = f/g</m> and multiplying both sides by <m>g</m>, we can observe that
<me>
  f(x) = Q(x) \cdot g(x).
</me>
</p>

<p>
Thus, we can use the product rule to differentiate <m>f</m>. Doing so,
<me>
  f'(x) = Q(x) g'(x) + g(x) Q'(x).
</me>
</p>

<p>
Since we want to know a formula for <m>Q'</m>, we work to solve this most recent equation for <m>Q'(x)</m>, finding first that
<me>
  Q'(x) g(x) = f'(x) - Q(x) g'(x).
</me>
</p>

<p>
Dividing both sides by <m>g(x)</m>, we have
<me>
  Q'(x) = \frac{f'(x) - Q(x) g'(x)}{g(x)}.
</me>
</p>

<p>
Finally, we also recall that <m>Q(x) = \frac{f(x)}{g(x)}.</m> Using this expression in the preceding equation and simplifying, we have
<md>
  <mrow>  Q'(x) =\mathstrut \amp  \frac{f'(x) - \frac{f(x)}{g(x)} g'(x)}{g(x)}</mrow>
  <mrow>  =\mathstrut \amp  \frac{f'(x) - \frac{f(x)}{g(x)} g'(x)}{g(x)} \cdot \frac{g(x)}{g(x)}</mrow>
  <mrow>  =\mathstrut \amp  \frac{g(x) f'(x) -  f(x) g'(x)}{g(x)^2}.</mrow>
</md>
</p>

<p>
This shows the fundamental argument for why the <em>quotient rule</em> holds.
</p>

<assemblage xml:id="quot-rule">
    <title>Quotient Rule</title>
    <p><idx><h>quotient rule</h></idx> If <m>f</m> and <m>g</m> are differentiable functions, then their quotient <m>Q(x) = \frac{f(x)}{g(x)}</m> is also a differentiable function for all <m>x</m> where <m>g(x) \ne 0</m> and
<me>
  Q'(x) = \frac{g(x) f'(x) -  f(x) g'(x)}{g(x)^2}.
</me></p>
</assemblage>

<p>
Like the product rule, it can be helpful to think of the quotient rule verbally. If a function <m>Q</m> is the quotient of a top function <m>f</m> and a bottom function <m>g</m>, then <m>Q'</m> is given by <q>the bottom times the derivative of the top, minus the top times the derivative of the bottom, all over the bottom squared.</q> For example, if <m>Q(t) = \sin(t)/2^t</m>, then we can identify the top function as <m>\sin(t)</m> and the bottom function as <m>2^t</m>. By the quotient rule, we then have that <m>Q'</m> will be given by the bottom, <m>2^t</m>, times the derivative of the top, <m>\cos(t)</m>, minus the top, <m>\sin(t)</m>, times the derivative of the bottom, <m>2^t \ln(2)</m>, all over the bottom squared, <m>(2^t)^2</m>. That is,
<me>
  Q'(t) = \frac{2^t \cos(t) - \sin(t) 2^t \ln(2)}{(2^t)^2}.
</me>
</p>

<p>
In this particular example, it is possible to simplify <m>Q'(t)</m> by removing a factor of <m>2^t</m> from both the numerator and denominator, hence finding that
<me>
  Q'(t) = \frac{\cos(t) - \sin(t) \ln(2)}{2^t}.
</me>
</p>

<p>
In general, we must be careful in doing any such simplification, as we don't want to correctly execute the quotient rule but then find an incorrect overall derivative due to an algebra error. As such, we will often place more emphasis on correctly using derivative rules than we will on simplifying the result that follows. The next activity further explores the use of the quotient rule.
</p>

    <xi:include href="./activities/act-2-3-2.xml" />

</subsection>

<subsection>
<title>Combining rules</title>
<p>
One of the challenges to learning to apply various derivative shortcut rules correctly and effectively is recognizing the fundamental structure of a function. For instance, consider the function given by
<me>
  f(x) = x\sin(x) + \frac{x^2}{\cos(x) + 2}.
</me>
</p>

<p>
How do we decide which rules to apply? Our first task is to recognize the overall structure of the given function. Observe that the function <m>f</m> is fundamentally a sum of two slightly less complicated functions, so we can apply the sum rule<fn>When taking a derivative that involves the use of multiple derivative rules, it is often helpful to use the notation <m>\frac{d}{dx} \left[ ~~\right]</m> to wait to apply subsequent rules.  This is demonstrated in each of the two examples presented here.</fn> and get
<md>
  <mrow>  f'(x) =\mathstrut \amp  \frac{d}{dx} \left[ x\sin(x) + \frac{x^2}{\cos(x) + 2} \right]</mrow>
  <mrow>  =\mathstrut \amp  \frac{d}{dx} \left[ x\sin(x) \right] + \frac{d}{dx}\left[ \frac{x^2}{\cos(x) + 2} \right]</mrow>
</md>
</p>

<p>
Now, the left-hand term above is a product, so the product rule is needed there, while the right-hand term is a quotient, so the quotient rule is required. Applying these rules respectively, we find that
<md>
  <mrow>  f'(x) =\mathstrut \amp  \left( x \cos(x) + \sin(x) \right) + \frac{(\cos(x) + 2) 2x - x^2(-\sin(x))}{(\cos(x) + 2)^2}</mrow>
  <mrow>  =\mathstrut \amp  x \cos(x) + \sin(x) + \frac{2x\cos(x) + 4x^2 + x^2\sin(x)}{(\cos(x) + 2)^2}.</mrow>
</md>
</p>

<p>
We next consider how the situation changes with the function defined by
<me>
  s(y) = \frac{y \cdot 7^y}{y^2 + 1}.
</me>
</p>

<p>
Overall, <m>s</m> is a quotient of two simpler function, so the quotient rule will be needed. Here, we execute the quotient rule and use the notation <m>\frac{d}{dy}</m> to defer the computation of the derivative of the numerator and derivative of the denominator. Thus,
<me>
  s'(y) = \frac{(y^2 + 1) \cdot \frac{d}{dy}\left[ y \cdot 7^y \right] - y \cdot 7^y \cdot \frac{d}{dy}\left[y^2 + 1 \right]}{(y^2 + 1)^2}.
</me>
</p>

<p>
Now, there remain two derivatives to calculate. The first one, <m>\frac{d}{dy}\left[ y \cdot 7^y \right]</m> calls for use of the product rule, while the second, <m>\frac{d}{dy}\left[y^2 + 1 \right]</m> takes only an elementary application of the sum rule. Applying these rules, we now have
<me>
  s'(y) = \frac{(y^2 + 1) [y \cdot 7^y \ln(7) + 7^y \cdot 1] - y \cdot 7^y [2y]}{(y^2 + 1)^2}.
</me>
</p>

<p>
While some minor simplification is possible, we are content to leave <m>s'(y)</m> in its current form, having found the desired derivative of <m>s</m>. In summary, to compute the derivative of <m>s</m>, we applied the quotient rule. In so doing, when it was time to compute the derivative of the top function, we used the product rule; at the point where we found the derivative of the bottom function, we used the sum rule.
</p>

<p>
In general, one of the main keys to success in applying derivative rules is to recognize the structure of the function, followed by the careful and diligent application of relevant derivative rules. The best way to get good at this process is by doing a large number of exercises, and the next activity provides some practice and exploration to that end.
</p>

    <xi:include href="./activities/act-2-3-3.xml" />

<p>
As the algebraic complexity of the functions we are able to differentiate continues to increase, it is important to remember that all of the derivative's meaning continues to hold. Regardless of the structure of the function <m>f</m>, the value of <m>f'(a)</m> tells us the instantaneous rate of change of <m>f</m> with respect to <m>x</m> at the moment <m>x = a</m>, as well as the slope of the tangent line to <m>y = f(x)</m> at the point <m>(a,f(a))</m>.
</p>
</subsection>


<subsection>
<title>Summary</title>
<p><ul>
<li><p>If a function is a sum, product, or quotient of simpler functions, then we can use the sum, product, or quotient rules to differentiate the overall function in terms of the simpler functions and their derivatives.</p></li>
<li><p>The product rule tells us that if <m>P</m> is a product of differentiable functions <m>f</m> and <m>g</m> according to the rule <m>P(x) = f(x) g(x)</m>, then
<me>
  P'(x) = f(x)g'(x) + g(x)f'(x).
</me></p></li>
<li><p>The quotient rule tells us that if <m>Q</m> is a quotient of differentiable functions <m>f</m> and <m>g</m> according to the rule <m>Q(x) = \frac{f(x)}{g(x)}</m>, then
<me>
  Q'(x) = \frac{g(x)f'(x) - f(x)g'(x)}{g(x)^2}.
</me></p></li>
<li><p>The product and quotient rules now complement the constant multiple and sum rules and enable us to compute the derivative of any function that consists of sums, constant multiples, products, and quotients of basic functions we already know how to differentiate.  For instance, if <m>F</m> has the form
<me>
  F(x) = \frac{2a(x) - 5b(x)}{c(x) \cdot d(x)},
</me>
then <m>F</m> is fundamentally a quotient, and the numerator is a sum of constant multiples and the denominator is a product.  Hence the derivative of <m>F</m> can be found by applying the quotient rule and then using the sum and constant multiple rules to differentiate the numerator and the product rule to differentiate the denominator.</p></li>
</ul></p>



</subsection>

    <xi:include href="./exercises/ez-2-3.xml" />

<!-- <xi:include href="./activities/act-1-1-1.xml" /> -->
<!-- <xi:include href="./exercises/ez-1-1.xml" /> -->



</section>